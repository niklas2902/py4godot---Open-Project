[gd_scene load_steps=28 format=2]

[ext_resource path="res://Scripts/Enemy/Enemy.py" type="Script" id=1]
[ext_resource path="res://Scripts/Navigation/RouteHolder.py" type="Script" id=2]
[ext_resource path="res://Models/slope.glb" type="PackedScene" id=3]
[ext_resource path="res://Scripts/Utils.gd" type="Script" id=4]
[ext_resource path="res://Scripts/UI/HidePlayerButton.gd" type="Script" id=5]
[ext_resource path="res://Scripts/Check.py" type="Script" id=6]
[ext_resource path="res://Scripts/Navigation/AStar.py" type="Script" id=7]
[ext_resource path="res://Prefabs/DebugNode.tscn" type="PackedScene" id=8]
[ext_resource path="res://Scripts/Utils/BehaviorTreeVisualizerLogic.py" type="Script" id=9]
[ext_resource path="res://Scripts/Enemy/EnemyGizmo.py" type="Script" id=10]
[ext_resource path="res://Scripts/UI/HidePlayerLogic.py" type="Script" id=11]

[sub_resource type="CubeMesh" id=1]

[sub_resource type="SpatialMaterial" id=13]
albedo_color = Color( 0.52549, 0.184314, 0.184314, 1 )

[sub_resource type="CapsuleMesh" id=2]

[sub_resource type="ConvexPolygonShape" id=3]
margin = 0.056
points = PoolVector3Array( 0, 0, 0, 1, 0, 0, 0, 0, 2, 1, 0, 2, 0, 2, 2, 1, 2, 2 )

[sub_resource type="BoxShape" id=4]
extents = Vector3( 16.5305, 0.302151, 15.817 )

[sub_resource type="CubeMesh" id=5]

[sub_resource type="CubeMesh" id=6]

[sub_resource type="ShaderMaterial" id=7]

[sub_resource type="BoxShape" id=8]

[sub_resource type="SphereMesh" id=9]

[sub_resource type="SpatialMaterial" id=10]

[sub_resource type="SphereMesh" id=11]

[sub_resource type="SphereMesh" id=12]

[sub_resource type="PrismMesh" id=14]

[sub_resource type="SpatialMaterial" id=15]
albedo_color = Color( 0.239216, 0.713726, 0.184314, 1 )

[sub_resource type="BoxShape" id=16]

[node name="Spatial" type="Spatial"]

[node name="Enemy" type="Spatial" parent="."]
script = ExtResource( 1 )
utils_path = NodePath("../Util")
tree_path = NodePath("../Node2D/Tree/TreeLogic")
astar_path = NodePath("../AStar")
field_of_view = 1.5
action_radius = 6.0
route_holder_path = NodePath("../RouteHolder")
player_path = NodePath("../PlayerStub")
sprint_modifier = 2.0
out_of_sight_radius = 8.1

[node name="MeshInstance" type="MeshInstance" parent="Enemy"]
mesh = SubResource( 1 )
material/0 = SubResource( 13 )

[node name="EnemyGizmo" type="Spatial" parent="Enemy"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.06256, 0 )
script = ExtResource( 10 )
enemy_path = NodePath("..")

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 45.2539, 0.324391 )

[node name="RouteHolder" type="Spatial" parent="."]
script = ExtResource( 2 )

[node name="Spatial" type="Spatial" parent="RouteHolder"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -11.3482, 0, 3.86212 )

[node name="MeshInstance" type="MeshInstance" parent="RouteHolder/Spatial"]
mesh = SubResource( 2 )

[node name="Spatial2" type="Spatial" parent="RouteHolder"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4.92511, 0, -4.68494 )

[node name="MeshInstance" type="MeshInstance" parent="RouteHolder/Spatial2"]
mesh = SubResource( 2 )
skeleton = NodePath("../../Spatial2")

[node name="Spatial3" type="Spatial" parent="RouteHolder"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.04447, 0, 7.34351 )

[node name="MeshInstance" type="MeshInstance" parent="RouteHolder/Spatial3"]
mesh = SubResource( 2 )

[node name="AStar" type="Spatial" parent="."]
script = ExtResource( 7 )
utils_path = NodePath("../Util")
push_obj_layer = 4

[node name="Util" type="Spatial" parent="."]
script = ExtResource( 4 )

[node name="Environment" type="Spatial" parent="."]

[node name="Ramp" type="StaticBody" parent="Environment" groups=["obstace"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.168214, 4.62002 )
collision_layer = 2
collision_mask = 2

[node name="CollisionShape" type="CollisionShape" parent="Environment/Ramp"]
transform = Transform( 2, 0, 0, 0, 1, 0, 0, 0, 1, -0.964805, -0.248904, -2.05632 )
shape = SubResource( 3 )

[node name="slope" parent="Environment/Ramp" instance=ExtResource( 3 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.746843, -1.06652 )

[node name="Ground" type="StaticBody" parent="Environment" groups=["walkable"]]
collision_layer = 2
collision_mask = 65535

[node name="CollisionShape" type="CollisionShape" parent="Environment/Ground"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.358482, 0 )
shape = SubResource( 4 )

[node name="MeshInstance" type="MeshInstance" parent="Environment/Ground"]
transform = Transform( 15, 0, 0, 0, 0.1, 0, 0, 0, 15, 0, 0, 0 )
mesh = SubResource( 5 )

[node name="PushObj" type="StaticBody" parent="Environment" groups=["obstacle"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.704, 1, 0 )
collision_layer = 4
collision_mask = 0

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CSGMesh2" type="CSGMesh" parent="Environment/PushObj"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="Environment/PushObj"]
shape = SubResource( 8 )

[node name="Triggers" type="Spatial" parent="Environment/PushObj"]

[node name="Trigger1" type="Spatial" parent="Environment/PushObj/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj/Triggers/Trigger1"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 9 )
material = SubResource( 10 )

[node name="Trigger2" type="Spatial" parent="Environment/PushObj/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1 )

[node name="CSGSphere" type="CSGSphere" parent="Environment/PushObj/Triggers/Trigger2"]
radius = 0.1

[node name="Trigger3" type="Spatial" parent="Environment/PushObj/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj/Triggers/Trigger3"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 11 )

[node name="Trigger4" type="Spatial" parent="Environment/PushObj/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 0 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj/Triggers/Trigger4"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 12 )

[node name="ArrawPos" type="Spatial" parent="Environment/PushObj"]

[node name="Trigger1" type="Spatial" parent="Environment/PushObj/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.19474 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 1

[node name="Trigger2" type="Spatial" parent="Environment/PushObj/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.35827 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 2

[node name="Trigger3" type="Spatial" parent="Environment/PushObj/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.71112, 0, 0.0103167 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 4

[node name="Trigger4" type="Spatial" parent="Environment/PushObj/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.37227, 0, 0.0206334 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 8

[node name="PushObj3" type="StaticBody" parent="Environment" groups=["obstacle"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.704, 1, 4.12028 )
collision_layer = 4
collision_mask = 0

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj3"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CSGMesh2" type="CSGMesh" parent="Environment/PushObj3"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="Environment/PushObj3"]
shape = SubResource( 8 )

[node name="Triggers" type="Spatial" parent="Environment/PushObj3"]

[node name="Trigger1" type="Spatial" parent="Environment/PushObj3/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj3/Triggers/Trigger1"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 9 )
material = SubResource( 10 )

[node name="Trigger2" type="Spatial" parent="Environment/PushObj3/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1 )

[node name="CSGSphere" type="CSGSphere" parent="Environment/PushObj3/Triggers/Trigger2"]
radius = 0.1

[node name="Trigger3" type="Spatial" parent="Environment/PushObj3/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj3/Triggers/Trigger3"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 11 )

[node name="Trigger4" type="Spatial" parent="Environment/PushObj3/Triggers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 0 )

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj3/Triggers/Trigger4"]
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )
mesh = SubResource( 12 )

[node name="ArrawPos" type="Spatial" parent="Environment/PushObj3"]

[node name="Trigger1" type="Spatial" parent="Environment/PushObj3/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.15374 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 1

[node name="Trigger2" type="Spatial" parent="Environment/PushObj3/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.09569 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 2

[node name="Trigger3" type="Spatial" parent="Environment/PushObj3/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.71112, 0, 0.0103167 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 4

[node name="Trigger4" type="Spatial" parent="Environment/PushObj3/ArrawPos"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.11146, 0, 0.0103167 )
script = ExtResource( 6 )
util_path = NodePath("../../../../../Util")
orientation = 8

[node name="GroundObj" type="StaticBody" parent="Environment"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0132506, 0.918345, 5.56421 )
collision_layer = 2
collision_mask = 2

[node name="CSGMesh" type="CSGMesh" parent="Environment/GroundObj"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="Environment/GroundObj"]
shape = SubResource( 8 )

[node name="PushObj4" type="StaticBody" parent="Environment" groups=["obstacle"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8.90428, 1, 0.0257483 )
collision_layer = 4
collision_mask = 4

[node name="CSGMesh" type="CSGMesh" parent="Environment/PushObj4"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CSGMesh2" type="CSGMesh" parent="Environment/PushObj4"]
mesh = SubResource( 6 )
material = SubResource( 7 )

[node name="CollisionShape" type="CollisionShape" parent="Environment/PushObj4"]
shape = SubResource( 8 )

[node name="DebugNode" parent="." instance=ExtResource( 8 )]

[node name="PlayerStub" type="KinematicBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.03506 )
collision_mask = 65535

[node name="MeshInstance" type="MeshInstance" parent="PlayerStub"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.02689, 0 )
mesh = SubResource( 14 )
material/0 = SubResource( 15 )

[node name="CollisionShape" type="CollisionShape" parent="PlayerStub"]
shape = SubResource( 16 )

[node name="Node2D" type="Node2D" parent="."]

[node name="Tree" type="Tree" parent="Node2D"]
margin_right = 200.0
margin_bottom = 600.0

[node name="TreeLogic" type="Node2D" parent="Node2D/Tree"]
script = ExtResource( 9 )
tree_path = NodePath("..")

[node name="HidePlayer" type="Button" parent="Node2D"]
margin_left = 871.0
margin_right = 1029.0
margin_bottom = 57.0
text = "Hide Player"
script = ExtResource( 5 )

[node name="HidePlayerLogic" type="Node2D" parent="Node2D/HidePlayer"]
position = Vector2( -871, 0 )
script = ExtResource( 11 )
player_path = NodePath("../../../PlayerStub")
